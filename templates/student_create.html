{% extends "base.html" %}

{% block title %}Create New Student{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-4">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/students">Students</a></li>
                    <li class="breadcrumb-item active">Create New Student</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h4 class="mb-0">Create New Student</h4>
        </div>
        <div class="card-body">
            <form method="POST">
                <!-- Personal & Contact Information -->
                <div class="accordion mb-4" id="studentForm">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#personalInfo" aria-expanded="true" aria-controls="personalInfo">
                                Personal & Contact Information
                            </button>
                        </h2>
                        <div id="personalInfo" class="accordion-collapse collapse show" data-bs-parent="#studentForm">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <!-- Personal Information -->
                                    <div class="col-md-4">
                                        <label for="first_name" class="form-label">First Name*</label>
                                        <input type="text" class="form-control" id="first_name" name="first_name" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="middle_name" class="form-label">Middle Name</label>
                                        <input type="text" class="form-control" id="middle_name" name="middle_name">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="last_name" class="form-label">Last Name*</label>
                                        <input type="text" class="form-control" id="last_name" name="last_name" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="hebrew_name" class="form-label">Hebrew Name</label>
                                        <input type="text" class="form-control" id="hebrew_name" name="hebrew_name">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="informal_name" class="form-label">Informal Name</label>
                                        <input type="text" class="form-control" id="informal_name" name="informal_name">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="marital_status" class="form-label">Marital Status*</label>
                                        <select class="form-select" id="marital_status" name="marital_status" required>
                                            <option value="">Choose...</option>
                                            <option value="single">Single</option>
                                            <option value="married">Married</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="dateOfBirth" class="form-label">Date of Birth</label>
                                        <input type="date" class="form-control" id="dateOfBirth" name="date_of_birth">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="citizenship" class="form-label">Citizenship</label>
                                        <input type="text" class="form-control" id="citizenship" name="citizenship">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="highSchoolGraduate" class="form-label">High School Graduate</label>
                                        <select class="form-select" id="highSchoolGraduate" name="high_school_graduate">
                                            <option value="yes">Yes</option>
                                            <option value="no">No</option>
                                        </select>
                                    </div>

                                    <!-- Contact Information -->
                                    <div class="col-md-6">
                                        <label for="phone_number" class="form-label">Phone Number*</label>
                                        <input type="tel" class="form-control" id="phone_number" name="phone_number" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="ssn" class="form-label">SSN</label>
                                        <input type="text" class="form-control" id="ssn" name="ssn">
                                    </div>

                                    <!-- Address -->
                                    <div class="col-12">
                                        <label for="address_line1" class="form-label">Address Line 1*</label>
                                        <input type="text" class="form-control" id="address_line1" name="address_line1" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="city" class="form-label">City*</label>
                                        <input type="text" class="form-control" id="city" name="city" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="state" class="form-label">State*</label>
                                        <input type="text" class="form-control" id="state" name="state" required>
                                    </div>
                                    <div class="col-md-2">
                                        <label for="zip" class="form-label">ZIP*</label>
                                        <input type="text" class="form-control" id="zip" name="zip" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="country" class="form-label">Country</label>
                                        <input type="text" class="form-control" id="country" name="country">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Parents Information -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#parentsInfo" aria-expanded="false" aria-controls="parentsInfo">
                                Parents Information
                            </button>
                        </h2>
                        <div id="parentsInfo" class="accordion-collapse collapse" data-bs-parent="#studentForm">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <!-- Father's Information -->
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="mb-0">Father's Information</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="father_title" class="form-label">Title</label>
                                                    <select class="form-select" id="father_title" name="father_title">
                                                        <option value="">Choose...</option>
                                                        <option value="Mr.">Mr.</option>
                                                        <option value="Dr.">Dr.</option>
                                                        <option value="Rabbi">Rabbi</option>
                                                        <option value="Prof.">Prof.</option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="father_first_name" class="form-label">First Name</label>
                                                    <input type="text" class="form-control" id="father_first_name" name="father_first_name">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="father_last_name" class="form-label">Last Name</label>
                                                    <input type="text" class="form-control" id="father_last_name" name="father_last_name">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="father_phone" class="form-label">Phone</label>
                                                    <input type="tel" class="form-control" id="father_phone" name="father_phone">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="father_occupation" class="form-label">Occupation</label>
                                                    <input type="text" class="form-control" id="father_occupation" name="father_occupation">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Mother's Information -->
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="mb-0">Mother's Information</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="mother_title" class="form-label">Title</label>
                                                    <select class="form-select" id="mother_title" name="mother_title">
                                                        <option value="">Choose...</option>
                                                        <option value="Mrs.">Mrs.</option>
                                                        <option value="Ms.">Ms.</option>
                                                        <option value="Dr.">Dr.</option>
                                                        <option value="Prof.">Prof.</option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mother_first_name" class="form-label">First Name</label>
                                                    <input type="text" class="form-control" id="mother_first_name" name="mother_first_name">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mother_last_name" class="form-label">Last Name</label>
                                                    <input type="text" class="form-control" id="mother_last_name" name="mother_last_name">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mother_phone" class="form-label">Phone</label>
                                                    <input type="tel" class="form-control" id="mother_phone" name="mother_phone">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mother_occupation" class="form-label">Occupation</label>
                                                    <input type="text" class="form-control" id="mother_occupation" name="mother_occupation">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Spouse Information -->
                    <div class="accordion-item" id="spouse_section" style="display: none;">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#spouseInfo" aria-expanded="false" aria-controls="spouseInfo">
                                Spouse Information
                            </button>
                        </h2>
                        <div id="spouseInfo" class="accordion-collapse collapse" data-bs-parent="#studentForm">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="spouse_first_name" class="form-label">First Name</label>
                                        <input type="text" class="form-control" id="spouse_first_name" name="spouse_first_name">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="spouse_last_name" class="form-label">Last Name</label>
                                        <input type="text" class="form-control" id="spouse_last_name" name="spouse_last_name">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="spouse_phone" class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="spouse_phone" name="spouse_phone">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="spouse_occupation" class="form-label">Occupation</label>
                                        <input type="text" class="form-control" id="spouse_occupation" name="spouse_occupation">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- In-Laws Information -->
                    <div class="accordion-item" id="inlaws_section" style="display: none;">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#inlawsInfo" aria-expanded="false" aria-controls="inlawsInfo">
                                In-Laws Information
                            </button>
                        </h2>
                        <div id="inlawsInfo" class="accordion-collapse collapse" data-bs-parent="#studentForm">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <!-- Combined In-Laws Information -->
                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="mb-0">In-Laws Contact Information</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="row g-3">
                                                    <!-- Names -->
                                                    <div class="col-md-12">
                                                        <label for="inlaws_first_name" class="form-label">In-Laws' First Name</label>
                                                        <input type="text" class="form-control" id="inlaws_first_name" name="inlaws_first_name">
                                                    </div>
                                                    <div class="col-md-12">
                                                        <label for="inlaws_last_name" class="form-label">In-Laws' Last Name</label>
                                                        <input type="text" class="form-control" id="inlaws_last_name" name="inlaws_last_name">
                                                    </div>
                                                    
                                                    <!-- Contact Information -->
                                                    <div class="col-md-6">
                                                        <label for="inlaws_telephone" class="form-label">Telephone</label>
                                                        <input type="tel" class="form-control" id="inlaws_telephone" name="inlaws_telephone">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="inlaws_email" class="form-label">Email</label>
                                                        <input type="email" class="form-control" id="inlaws_email" name="inlaws_email">
                                                    </div>

                                                    <!-- Address -->
                                                    <div class="col-12">
                                                        <label for="inlaws_address_line1" class="form-label">Address Line 1</label>
                                                        <input type="text" class="form-control" id="inlaws_address_line1" name="inlaws_address_line1">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="inlaws_city" class="form-label">City</label>
                                                        <input type="text" class="form-control" id="inlaws_city" name="inlaws_city">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="inlaws_state" class="form-label">State</label>
                                                        <input type="text" class="form-control" id="inlaws_state" name="inlaws_state">
                                                    </div>
                                                    <div class="col-md-2">
                                                        <label for="inlaws_zip" class="form-label">ZIP</label>
                                                        <input type="text" class="form-control" id="inlaws_zip" name="inlaws_zip">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Grandparents Information -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#grandparentsInfo" aria-expanded="false" aria-controls="grandparentsInfo">
                                Grandparents Information
                            </button>
                        </h2>
                        <div id="grandparentsInfo" class="accordion-collapse collapse" data-bs-parent="#studentForm">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <!-- Paternal Grandparents -->
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="mb-0">Paternal Grandparents</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="paternal_grandparents_name" class="form-label">Name</label>
                                                    <input type="text" class="form-control" id="paternal_grandparents_name" name="paternal_grandparents_name">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="paternal_grandparents_phone" class="form-label">Phone</label>
                                                    <input type="tel" class="form-control" id="paternal_grandparents_phone" name="paternal_grandparents_phone">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Maternal Grandparents -->
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="mb-0">Maternal Grandparents</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="maternal_grandparents_name" class="form-label">Name</label>
                                                    <input type="text" class="form-control" id="maternal_grandparents_name" name="maternal_grandparents_name">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="maternal_grandparents_phone" class="form-label">Phone</label>
                                                    <input type="tel" class="form-control" id="maternal_grandparents_phone" name="maternal_grandparents_phone">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Status Information -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#statusInfo" aria-expanded="false" aria-controls="statusInfo">
                                Status Information
                            </button>
                        </h2>
                        <div id="statusInfo" class="accordion-collapse collapse" data-bs-parent="#studentForm">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="status" class="form-label">Student Status</label>
                                        <select class="form-select" id="status" name="status">
                                            <option value="Active">Active</option>
                                            <option value="Inactive">Inactive</option>
                                            <option value="On Leave">On Leave</option>
                                            <option value="Graduated">Graduated</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Information -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#financialInfo" aria-expanded="false" aria-controls="financialInfo">
                                Financial Information
                            </button>
                        </h2>
                        <div id="financialInfo" class="accordion-collapse collapse" data-bs-parent="#studentForm">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <div class="col-md-12">
                                        <label for="financialAidStatus" class="form-label">Financial Aid Status</label>
                                        <select class="form-select" id="financialAidStatus" name="financial_aid_status">
                                            <option value="Full Tuition">Full Tuition</option>
                                            <option value="Not Full Tuition">Not Full Tuition</option>
                                        </select>
                                    </div>
                                    <div id="scholarshipRequestSection" style="display: none;">
                                        <div class="col-12">
                                            <h5 class="mt-3 mb-3">Scholarship Request</h5>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="amountCanPay" class="form-label">Amount Can Pay</label>
                                            <div class="input-group">
                                                <span class="input-group-text">$</span>
                                                <input type="number" class="form-control" id="amountCanPay" name="amount_can_pay">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="scholarshipAmount" class="form-label">Scholarship Amount</label>
                                            <div class="input-group">
                                                <span class="input-group-text">$</span>
                                                <input type="number" class="form-control" id="scholarshipAmount" name="scholarship_amount">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-end mt-4">
                    <button type="submit" class="btn btn-primary">Create Student</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
// Show/hide spouse and in-laws sections based on marital status
document.getElementById('marital_status').addEventListener('change', function() {
    const spouseSection = document.getElementById('spouse_section');
    const inlawsSection = document.getElementById('inlaws_section');
    if (this.value === 'married') {
        spouseSection.style.display = 'block';
        inlawsSection.style.display = 'block';
    } else {
        spouseSection.style.display = 'none';
        inlawsSection.style.display = 'none';
    }
});

// Show/hide scholarship request section based on financial aid status
document.getElementById('financialAidStatus').addEventListener('change', function() {
    const scholarshipRequestSection = document.getElementById('scholarshipRequestSection');
    if (this.value === 'Not Full Tuition') {
        scholarshipRequestSection.style.display = 'block';
    } else {
        scholarshipRequestSection.style.display = 'none';
        // Clear the values when hiding
        document.getElementById('amountCanPay').value = '';
        document.getElementById('scholarshipAmount').value = '';
    }
});

// Trigger the change event on page load to set initial state
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('marital_status').dispatchEvent(new Event('change'));
    document.getElementById('financialAidStatus').dispatchEvent(new Event('change'));
});
</script>
{% endblock %} 